<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.inte.Op">
	<select id="getUser" parameterType="int" resultMap="UserMap">
		SELECT
		a.`id`,a.`userName`,a.`tel`,c.`id` AS productId,c.`productName` FROM
		USER a LEFT JOIN transation b ON b.`user_id` = a.`id` LEFT JOIN
		product c ON c.`id` = b.`product_id` WHERE a.`id` = #{id};
	</select>
	<select id="getProduct" parameterType="int"
		resultType="com.mybatis.domain.Product">
		SELECT id,productName,catalog FROM product WHERE id =
		#{id};
	</select>
	<resultMap id="UserMap" type="com.mybatis.domain.User">
		<constructor>
			<idArg column="id" javaType="int" />
			<arg column="userName" javaType="String" />
			<arg column="tel" javaType="String" />
		</constructor>
		<collection property="products" ofType="com.mybatis.domain.Product">
			<id property="id" column="productId" />
			<result property="productName" column="productName" />
		</collection>
	</resultMap>
</mapper>